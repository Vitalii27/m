function dynamicSort(t,e){var r=-1;return e&&(r=1),"price"!==t?function(e,i){return(e.products[0][t].toLowerCase()<i.products[0][t].toLowerCase()?-1:e.products[0][t].toLowerCase()>i.products[0][t].toLowerCase()?1:0)*r}:function(e,i){return(e.products[0][t]<i.products[0][t]?-1:e.products[0][t]>i.products[0][t]?1:0)*r}}Object.defineProperty(Array.prototype,"chunk",{value:function(t){for(var e=[],r=0;r<this.length;r+=t)e.push(this.slice(r,r+t));return e}});var app=new Vue({el:"#app",watch:{compareProducts:{deep:!0,handler:function(){localStorage.setItem(this.categoryName,JSON.stringify(this.compareProducts))}}},data:{filterConfiguration:[],arrayData:[],curIndex:0,activeItemId:"",show:"",perPage:12,defValues:{buttonsSettings:{maxButtons:5},arrowsSettings:{hideArrows:!1,arrowSwitchHide:!1},pageStarted:1,pageSettings:{pageClass:""}},sortData:{sortMin:!0,sortBy:"price"},filterParams:[],loaded:!1,compareUrl:"",compareProducts:[],categoryName:"",isHidePopup:!1},mounted:function(){jcf.destroyAll(),jcf.setOptions("Select",{wrapNative:!1,useCustomScroll:!0,multipleCompactStyle:!0,wrapNativeOnMobile:!1}),jcf.replaceAll(),localStorage.getItem(this.categoryName)&&(this.compareProducts=JSON.parse(localStorage.getItem(this.categoryName))),document.getElementById("app").style.opacity="1"},methods:{colorStyle:function(t){return{backgroundColor:""+t.color,border:"1px solid "+("#ffffff"!==t.color&&"#fff"!==t.color?"transparent":"gray")}},setJson:function(t){var e=this;this.loaded||(this.arrayData=t.arrayData,this.filterConfiguration=t.filterConfiguration,_.map(this.filterConfiguration,function(t){e.filterParams.push({filterParam:t.property,filterLabel:t.label,filterParamsData:[]})}),document.addEventListener("keydown",this.keydown),this.curIndex=this.def.pageStarted-1,this.$set(this.settings.arrayData[this.curIndex],"active",!0),this.loaded=!0)},keydown:function(t){t.ctrlKey&&39===t.which&&this.curIndex<this.settings.arrayData.length-1&&this.switch_page(this.curIndex+1),t.ctrlKey&&37===t.which&&this.curIndex>0&&this.switch_page(this.curIndex-1)},classArrowPrev:function(){if(0===this.curIndex)return this.def.arrowsSettings.arrowSwitchHide?"pagination-list__button_hide":"pagination-list__button_disabled"},classArrowNext:function(){if(this.curIndex===this.settings.arrayData.length-1)return this.def.arrowsSettings.arrowSwitchHide?"pagination-list__button_hide":"pagination-list__button_disabled"},switch_page:function(t){this.curIndex=t;for(var e=0;e<this.settings.arrayData.length;e++)this.$set(this.settings.arrayData[e],"active",!1);this.$set(this.settings.arrayData[t],"active",!0),this.$emit("callMethod",t),$(this).parents(".product").find($(".product-color-item")).removeClass("active"),$(this).parents(".product").find($(".product-color-item")).eq(0).addClass("active");var r=document.getElementById("app").offsetTop;window.scrollTo(0,r)},pagination:function(t){return 0===t||t===this.settings.arrayData.length-1?{li:!0,button:!0}:0===this.curIndex?t<=this.maxButton-2?{li:!0,button:!0}:t===this.maxButton-1?{li:!0,button:!1}:{li:!1}:t===this.curIndex?{li:!0,button:!0}:this.curIndex-this.maxButton/2+1<=0?t<=this.curIndex+this.maxButton/2-1+Math.abs(this.curIndex-this.maxButton/2+1)&&t>=this.curIndex-this.maxButton/2+1?{li:!0,button:!0}:t===this.curIndex+Math.round(this.maxButton/2)-1+Math.abs(this.curIndex-Math.round(this.maxButton/2)+1)||t===this.curIndex-Math.round(this.maxButton/2)+1?{li:!0,button:!1}:{li:!1}:this.curIndex+this.maxButton/2+1>this.settings.arrayData.length?t<=this.curIndex+this.maxButton/2-1&&t>=this.curIndex-this.maxButton/2+1-(this.curIndex+Math.round(this.maxButton/2)-this.settings.arrayData.length)?{li:!0,button:!0}:t===this.curIndex-Math.round(this.maxButton/2)+1-(this.curIndex+Math.round(this.maxButton/2)-this.settings.arrayData.length)?{li:!0,button:!1}:{li:!1}:t<=this.curIndex+this.maxButton/2-1&&t>=this.curIndex-this.maxButton/2+1?{li:!0,button:!0}:t===this.curIndex+Math.round(this.maxButton/2)-1||t===this.curIndex-Math.round(this.maxButton/2)+1?{li:!0,button:!1}:{li:!1}},changePerPage:function(t){this.perPage=t,this.curIndex=this.def.pageStarted-1,this.switch_page(this.curIndex)},setFirstPage:function(){this.curIndex=this.def.pageStarted-1,this.switch_page(this.curIndex)},clearFilter:function(){var t=this;this.filterParams.map(function(e,r){t.filterParams[r].filterParamsData=[]}),_.map(this.$refs.filterSelect,function(t,e){document.getElementsByClassName("jcf-select")[e].querySelector(".jcf-select-text").childNodes[0].textContent=t.getAttribute("placeholder")}),this.setFirstPage()},clearSingleFilter:function(t,e){this.filterParams[t].filterParamsData=_.filter(this.filterParams[t].filterParamsData,function(t){return t!==e}),_.map(this.$refs.filterSelect,function(t,r){if(t.value.length>0){var i=document.getElementsByClassName("jcf-select")[r].querySelector(".jcf-select-text").childNodes[0],a=i.innerHTML.split(", ");a=_.without(a,e),i.innerHTML=a.join(", "),a.length<=0&&(document.getElementsByClassName("jcf-select")[r].querySelector(".jcf-select-text").childNodes[0].innerHTML=t.getAttribute("placeholder"))}}),this.setFirstPage()},filteredItemsLength:function(){return this.arrayDataFiltered.length},activeItemLength:function(){return this.settings.arrayData[this.curIndex].length},hasColor:function(t){var e=!0;return _.map(t,function(t){_.isEmpty(t.color)&&(e=!1)}),e},addRatingWidth:function(t,e){var r=Number(t),i=Math.floor(r);return e<i?"100%":e===i?100*function(t,e){if(t>=1)return Number((t%e).toFixed(1));return t}(r,i)+"%":0},removeCompareProduct:function(t){var e=_.findIndex(this.compareProducts,{uuid:t});e>=0&&this.$delete(this.compareProducts,e)},clearAllCompareProducts:function(){this.compareProducts=[]},setCompareLink:function(t){return t?this.compareUrl=t:this.api=window.location.origin+"compare-products.html"},setCategory:function(t){return this.categoryName=t||""+window.location.href},compareMax:function(t){return this.compareProducts.length>=4&&void 0===_.find(this.compareProducts,{uuid:t})},hideShowComparePopup:function(){this.isHidePopup=!this.isHidePopup}},computed:{def:function(){return this.defValues},showPagination:function(){return this.settings.arrayData.length>1},maxButton:function(){return isNaN(this.def.buttonsSettings.maxButtons%2)?5:this.def.buttonsSettings.maxButtons%2==0?this.def.buttonsSettings.maxButtons+1:this.def.buttonsSettings.maxButtons},settings:function(){return{arrayData:this.arrayDataFiltered.chunk(this.perPage)}},sortedArray:function(){return this.arrayData.sort(dynamicSort(this.sortData.sortBy,this.sortData.sortMin))},arrayDataFiltered:function(){var t=this.sortedArray;return _.map(this.filterParams,function(e){e.filterParamsData.length>0&&_.map(t,function(r){r.filter[e.filterParam]&&r.filter[e.filterParam].some(function(t){return e.filterParamsData.includes(t)})?t.includes(r)||t.push(r):t=t.filter(function(t){return!_.isEqual(t.filter[e.filterParam],r.filter[e.filterParam])})})}),t},filterParamsConverted:function(){var t=[];return _.map(this.filterParams,function(e,r){_.map(e.filterParamsData,function(i){t.push({type:e.filterParam,label:e.filterLabel,value:i,index:r})})}),t},compareLink:function(){var t=[];return _.map(this.compareProducts,function(e){t.push(e.uuid)}),this.compareUrl+"?products="+t.join(",")},isActiveCompare:function(){return this.compareProducts.length>0},productsWord:function(){return this.compareProducts.length>1?"products":"product"},compareProductsLength:function(){return this.compareProducts.length?this.compareProducts.length:0}}});